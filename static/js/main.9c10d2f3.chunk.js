(this.webpackJsonpOSHR=this.webpackJsonpOSHR||[]).push([[0],{167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(62),c=a.n(l),u=a(36),o=a.n(u),m=a(76),i=a.n(m),d=a(79),s=a(24),f=a(35),E=a(3),h=(a(165),a(67)),g=a(28),b={clubs:[],students:[]};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CLUB":return t.club.groups=[],t.club.students=[],e.clubs.push(t.club),e;case"ADD_GROUP":var a,n=Object(g.a)(e.clubs);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.name===t.club_name){t.group.students=[],r.groups.push(t.group);break}}}catch(d){n.e(d)}finally{n.f()}return e;case"ADD_STUDENT":var l,c=Object(g.a)(e.clubs);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u.name===t.club_name){u.students.push(t.student);var o,m=Object(g.a)(u.groups);try{for(m.s();!(o=m.n()).done;){var i=o.value;if(i.name===t.group_name){i.students.push(t.student),e.students.push(t.student);break}}}catch(d){m.e(d)}finally{m.f()}break}}}catch(d){c.e(d)}finally{c.f()}return e;default:return e}},v=Object(h.a)({teacherState:p}),_=Object(h.b)(v),y=a(82),j=a(56),O=a(55),S=a(54),C=a(42),k=a(49),U=a(37),T=a(50),w=a(51),D=a(59),A=[{type:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c",value:"teacher"},{type:"\u041e\u0431\u0443\u0447\u0430\u044e\u0449\u0438\u0439\u0441\u044f",value:"student"},{type:"\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c",value:"parent"}],x=function(e){var t=e.id,a=e.go,l=(e.fetchedUser,Object(n.useState)("")),c=Object(s.a)(l,2),u=c[0],o=c[1],m=Object(n.useState)(null),i=Object(s.a)(m,2),d=i[0],f=i[1];return r.a.createElement(k.a,{id:t},r.a.createElement(U.a,null,"\u0412\u044b\u0431\u043e\u0440 \u0440\u043e\u043b\u0438"),r.a.createElement(w.a,null,r.a.createElement(S.a,null,r.a.createElement(O.a,{top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c"},r.a.createElement(j.a,{placeholder:"\u0420\u043e\u043b\u044c \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430",onChange:function(e){o(e.currentTarget.value),f("".concat(e.currentTarget.value,"_profile"))},value:u,options:A.map((function(e){return{label:e.type,value:e.value}})),renderOption:function(e){e.option;var t=Object(y.a)(e,["option"]);return r.a.createElement(C.a,t)}}))),"teacher"===u&&r.a.createElement(D.a,null,r.a.createElement(T.a,{stretched:!0,size:"l",onClick:a,"data-to":d},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))))},z=a(169),q=a(170),B=a(171),I=a(172),M=function(e){var t=e.go;return e.clubs.map((function(e){return r.a.createElement(E.t,{key:e.name,onClick:t,"data-to":"club","data-clubid":e.name},e.name?e.name:"")}))},G=function(e){var t=e.id,a=e.go,n=e.fetchedUser,l=e.store.getState().teacherState.clubs;return r.a.createElement(E.p,{id:t},r.a.createElement(E.q,null,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0447\u0438\u0442\u0435\u043b\u044f"),r.a.createElement(E.m,null,r.a.createElement(E.l,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:32}},r.a.createElement(E.c,{size:96,src:n&&n.photo_200?n.photo_200:""}),r.a.createElement(E.v,{style:{marginBottom:8,marginTop:20},level:"2",weight:"medium"},"".concat(n&&n.first_name?n.first_name:""," \n                        ").concat(n&&n.last_name?n.last_name:"")),r.a.createElement(E.u,{style:{marginBottom:24,color:"var(--text_secondary)"}},"\u0418\u043d\u0444\u043e"),r.a.createElement(E.d,{size:"m",mode:"secondary"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement(E.f,{before:r.a.createElement(z.a,{width:22,height:22})},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432"),r.a.createElement(E.f,{before:r.a.createElement(q.a,{width:22,height:22})},"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u0443\u0447\u0435\u043d\u0438\u043a\u043e\u0432"),r.a.createElement(E.f,{before:r.a.createElement(B.a,{width:22,height:22})},"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0439"),r.a.createElement(E.f,{before:r.a.createElement(I.a,{width:22,height:22}),onClick:a,"data-to":"teacher_addClub"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e")),r.a.createElement(E.m,{header:r.a.createElement(E.n,null,"\u041c\u043e\u0438 \u0441\u0435\u043a\u0446\u0438\u0438")},l.length>0&&r.a.createElement(M,{go:a,clubs:l}),0===l.length&&r.a.createElement(E.h,null,r.a.createElement(E.u,null,"\u0421\u0435\u043a\u0446\u0438\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))))};var R=function(e){var t=e.id,a=e.go,l=(e.fetchedUser,e.store),c=Object(n.useState)(""),u=Object(s.a)(c,2),o=u[0],m=u[1];return r.a.createElement(E.p,{id:t},r.a.createElement(E.q,{left:r.a.createElement(E.r,{onClick:a,"data-to":"teacher_profile"})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e"),r.a.createElement(E.m,null,r.a.createElement(E.j,null,r.a.createElement(E.i,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},r.a.createElement(E.o,{onChange:function(e){m(e.currentTarget.value)}})),r.a.createElement(E.i,{top:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"},r.a.createElement(E.s,{options:[{value:"0",label:"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u0440\u043e\u0431\u043e\u0442\u043e\u0442\u0435\u0445\u043d\u0438\u043a\u0430"},{value:"1",label:"\u0415\u0434\u0438\u043d\u043e\u0431\u043e\u0440\u0441\u0442\u0432\u0430"},{value:"2",label:"\u0414\u0440\u0443\u0433\u043e\u0435"}]})),r.a.createElement(E.k,{mode:"horizontal",top:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442\u043d\u044b\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f"},r.a.createElement(E.i,{top:"\u041e\u0442 (\u043b\u0435\u0442)"},r.a.createElement(E.o,null)),r.a.createElement(E.i,{top:"\u0414\u043e (\u043b\u0435\u0442)"},r.a.createElement(E.o,null))),r.a.createElement(E.g,null,"\u0411\u0435\u0437 \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u043d\u044b\u0445 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0439")),r.a.createElement(E.i,null,r.a.createElement(E.d,{size:"l",stretched:!0,onClick:function(){var e={name:o,id:Math.floor(1e4*Math.random())};l.dispatch(function(e){return{type:"ADD_CLUB",club:e}}(e)),a({currentTarget:{dataset:{to:"teacher_profile"}}})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e"))))},K=function(e){var t=e.id,a=e.go,l=(e.fetchedUser,e.club_name),c=e.store,u=Object(n.useState)(""),o=Object(s.a)(u,2),m=o[0],i=o[1];return r.a.createElement(E.p,{id:t},r.a.createElement(E.q,{left:r.a.createElement(E.r,{onClick:a,"data-to":"club"})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"),r.a.createElement(E.m,null,r.a.createElement(E.j,null,r.a.createElement(E.i,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},r.a.createElement(E.o,{onChange:function(e){i(e.currentTarget.value)}}))),r.a.createElement(E.i,null,r.a.createElement(E.d,{size:"l",stretched:!0,onClick:function(){var e={name:m,id:Math.floor(1e4*Math.random())};c.dispatch(function(e,t){return{type:"ADD_GROUP",group:e,club_name:t}}(e,l)),a({currentTarget:{dataset:{to:"club"}}})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"))))},N=function(e){var t=e.id,a=e.go,l=(e.fetchedUser,e.store),c=e.group_name,u=e.club_name,o=Object(n.useState)(""),m=Object(s.a)(o,2),i=m[0],d=m[1],f=Object(n.useState)(""),h=Object(s.a)(f,2),g=h[0],b=h[1];return r.a.createElement(E.p,{id:t},r.a.createElement(E.q,{left:r.a.createElement(E.r,{onClick:a,"data-to":"group"})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430"),r.a.createElement(E.m,null,r.a.createElement(E.j,null,r.a.createElement(E.i,{top:"\u0418\u043c\u044f"},r.a.createElement(E.o,{onChange:function(e){d(e.currentTarget.value)}})),r.a.createElement(E.i,{top:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"},r.a.createElement(E.o,{onChange:function(e){b(e.currentTarget.value)}}))),r.a.createElement(E.h,null,r.a.createElement(E.u,null,"\u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0412\u041a \u0434\u043b\u044f \u0438\u043d\u0432\u0430\u0439\u0442\u0430, \u043d\u043e \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u043c\u043e\u043a")),r.a.createElement(E.i,null,r.a.createElement(E.d,{size:"l",stretched:!0,onClick:function(){var e={firstname:i,lastname:g,id:Math.floor(1e4*Math.random()),clubs:{name:u,groups:c}};l.dispatch(function(e,t,a){return{type:"ADD_STUDENT",student:e,group_name:t,club_name:a}}(e,c,u)),a({currentTarget:{dataset:{to:"group"}}})},"data-clubid":u,"data-groupid":c},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430"))))},P=function(e){var t=e.go,a=e.groups,n=e.club_name;return a.map((function(e){return r.a.createElement(E.t,{key:e.name,onClick:t,"data-to":"group","data-clubid":n,"data-groupid":e.name},e.name?e.name:"")}))},V=function(e){var t=e.go,a=e.students;e.club_name,e.group_name;return a.map((function(e){return r.a.createElement(E.t,{key:e.id,before:r.a.createElement(E.c,{size:40}),onClick:t,"data-to":"teacher_student","data-studentid":e.id},"".concat(e.firstname?e.firstname:""," ").concat(e.lastname?e.lastname:""))}))},W=function(e){var t=e.id,a=e.go,n=(e.fetchedUser,e.store),l=e.club_name,c=function(){var e,t=n.getState().teacherState.clubs,a=Object(g.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(r.name===l)return r.students?r.students:null}}catch(c){a.e(c)}finally{a.f()}}(),u=function(){var e,t=n.getState().teacherState.clubs,a=Object(g.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(r.name===l)return r.groups?r.groups:null}}catch(c){a.e(c)}finally{a.f()}}();return r.a.createElement(E.p,{id:t},r.a.createElement(E.q,{left:r.a.createElement(E.r,{onClick:a,"data-to":"teacher_profile"})},'\u0421\u0435\u043a\u0446\u0438\u044f "',l||"",'"'),r.a.createElement(E.h,null,r.a.createElement(E.f,{before:r.a.createElement(I.a,{width:22,height:22}),onClick:a,"data-to":"teacher_addStudyGroup","data-clubid":l},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u0431\u043d\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443")),r.a.createElement(E.m,{header:r.a.createElement(E.n,null,"\u041c\u043e\u0438 \u0433\u0440\u0443\u043f\u043f\u044b")},u&&u.length>0&&r.a.createElement(P,{go:a,groups:u,club_name:l}),!u||0===u.length&&r.a.createElement(E.h,null,r.a.createElement(E.u,null,"\u0413\u0440\u0443\u043f\u043f\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))),r.a.createElement(E.m,{header:r.a.createElement(E.n,null,"\u0423\u0447\u0435\u043d\u0438\u043a\u0438 \u0441\u0435\u043a\u0446\u0438\u0438 ",l)},c&&c.length>0&&r.a.createElement(V,{go:a,students:c,club_name:l}),!c||0===c.length&&r.a.createElement(E.h,null,r.a.createElement(E.u,null,"\u0423\u0447\u0435\u043d\u0438\u043a\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))))},H=function(e){var t=e.id,a=e.go,n=(e.fetchedUser,e.store),l=e.club_name,c=e.group_name,u=function(){var e,t=n.getState().teacherState.clubs,a=Object(g.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(r.name===l){var u,o=Object(g.a)(r.groups);try{for(o.s();!(u=o.n()).done;){var m=u.value;if(m.name===c)return m.students?m.students:null}}catch(i){o.e(i)}finally{o.f()}}}}catch(i){a.e(i)}finally{a.f()}}();return r.a.createElement(E.p,{id:t},r.a.createElement(E.q,{left:r.a.createElement(E.r,{onClick:a,"data-to":"club","data-clubid":l})},"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"),r.a.createElement(E.h,null,r.a.createElement(E.f,{before:r.a.createElement(I.a,{width:22,height:22})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043d\u044f\u0442\u0438\u0435"),r.a.createElement(E.f,{before:r.a.createElement(I.a,{width:22,height:22}),onClick:a,"data-to":"teacher_addStudent","data-clubid":l,"data-groupid":c},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430")),r.a.createElement(E.m,{header:r.a.createElement(E.n,null,"\u0423\u0447\u0435\u043d\u0438\u043a\u0438 \u0433\u0440\u0443\u043f\u043f\u044b ",c)},u&&u.length>0&&r.a.createElement(V,{go:a,students:u,club_name:l,group_name:c}),!u||0===u.length&&r.a.createElement(E.h,null,r.a.createElement(E.u,null,"\u0423\u0447\u0435\u043d\u0438\u043a\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))))},J=a(173),L=function(e){var t=e.id,a=e.go,n=(e.fetchedUser,e.store),l=e.student_id,c=function(){var e,t=n.getState().teacherState.students,a=Object(g.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(r.id.toString()===l)return r||null}}catch(c){a.e(c)}finally{a.f()}}();return r.a.createElement(E.p,{id:t},r.a.createElement(E.q,{left:r.a.createElement(E.r,{onClick:a,"data-to":"group"})},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430"),r.a.createElement(E.m,null,r.a.createElement(E.l,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:32}},r.a.createElement(E.c,null),r.a.createElement(E.v,{style:{marginBottom:8,marginTop:20},level:"2",weight:"medium"},"".concat(c&&c.firstname?c.firstname:""," \n                        ").concat(c&&c.lastname?c.lastname:"")),r.a.createElement(E.u,{style:{marginBottom:24,color:"var(--text_secondary)"}},"\u0418\u043d\u0444\u043e"),r.a.createElement(E.d,{size:"m",mode:"secondary"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))),r.a.createElement(E.m,null,r.a.createElement(E.e,{before:r.a.createElement(z.a,{width:26,height:26}),description:"\u0421\u0435\u043a\u0446\u0438\u044f ".concat(c.clubs.name,", \u0433\u0440\u0443\u043f\u043f\u0430 ").concat(c.clubs.groups)},"1-\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435")),r.a.createElement(E.m,{header:r.a.createElement(E.n,null,"\u041b\u0438\u0447\u043d\u044b\u0435 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f")},r.a.createElement(E.e,{before:r.a.createElement(J.a,{width:26,height:26}),description:"\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433\u0441\u043a\u0438\u0439 \u043c\u043e\u043b\u043e\u0434\u0435\u0436\u043d\u044b\u0439 \u0444\u043e\u0440\u0443\u043c"},"1-\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u043d\u0430 \u0432\u044b\u0441\u0442\u0430\u0432\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432")))},F=function(){var e=Object(n.useState)("role"),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),u=Object(s.a)(c,2),m=u[0],h=u[1],g=Object(n.useState)(""),b=Object(s.a)(g,2),p=b[0],v=b[1],y=Object(n.useState)(""),j=Object(s.a)(y,2),O=j[0],S=j[1],C=Object(n.useState)(""),k=Object(s.a)(C,2),U=k[0],T=k[1];Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]);var w=function(e){e.currentTarget.dataset.clubid&&v(e.currentTarget.dataset.clubid),e.currentTarget.dataset.groupid&&S(e.currentTarget.dataset.groupid),e.currentTarget.dataset.studentid&&T(e.currentTarget.dataset.studentid),l(e.currentTarget.dataset.to)};return r.a.createElement(E.a,null,r.a.createElement(E.b,null,r.a.createElement(f.a,{activePanel:a},r.a.createElement(x,{id:"role",fetchedUser:m,go:w,store:_}),r.a.createElement(G,{id:"teacher_profile",fetchedUser:m,go:w,store:_}),r.a.createElement(R,{id:"teacher_addClub",fetchedUser:m,go:w,store:_}),r.a.createElement(K,{id:"teacher_addStudyGroup",fetchedUser:m,go:w,store:_,club_name:p}),r.a.createElement(N,{id:"teacher_addStudent",fetchedUser:m,go:w,store:_,club_name:p,group_name:O}),r.a.createElement(W,{id:"club",fetchedUser:m,go:w,store:_,club_name:p}),r.a.createElement(H,{id:"group",fetchedUser:m,go:w,store:_,club_name:p,group_name:O}),r.a.createElement(L,{id:"teacher_student",fetchedUser:m,go:w,store:_,student_id:U}))))};o.a.send("VKWebAppInit"),c.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.9c10d2f3.chunk.js.map