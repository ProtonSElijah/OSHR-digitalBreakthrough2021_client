(this.webpackJsonpOSHR=this.webpackJsonpOSHR||[]).push([[0],{172:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),l=a.n(c),u=a(34),o=a.n(u),m=a(74),i=a.n(m),d=a(79),s=a(26),f=a(30),E=a(7),p=(a(168),a(45)),b=a(65),h={clubs:[]};var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CLUB":return t.club.groups=[],t.club.students=[],e.clubs.push(t.club),e;case"ADD_GROUP":var a,n=Object(b.a)(e.clubs);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.name===t.club_name){r.groups.push(t.group);break}}}catch(c){n.e(c)}finally{n.f()}return e;default:return e}},v=Object(p.b)({teacherState:g}),_=Object(p.c)(v),j=a(82),y=a(56),O=a(54),C=a(53),k=a(42),S=a(49),U=a(36),T=a(50),A=a(51),D=a(55),w=[{type:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c",value:"teacher"},{type:"\u041e\u0431\u0443\u0447\u0430\u044e\u0449\u0438\u0439\u0441\u044f",value:"student"},{type:"\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c",value:"parent"}],x=function(e){var t=e.id,a=e.go,c=(e.fetchedUser,Object(n.useState)("role")),l=Object(s.a)(c,2),u=l[0],o=l[1],m=Object(n.useState)(null),i=Object(s.a)(m,2),d=i[0],f=i[1];return r.a.createElement(S.a,{id:t},r.a.createElement(U.a,null,"\u0412\u044b\u0431\u043e\u0440 \u0440\u043e\u043b\u0438"),r.a.createElement(A.a,null,r.a.createElement(C.a,null,r.a.createElement(O.a,{top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c"},r.a.createElement(y.a,{placeholder:"\u0420\u043e\u043b\u044c \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430",onChange:function(e){o(e.currentTarget.value),f("".concat(e.currentTarget.value,"_profile"))},options:w.map((function(e){return{label:e.type,value:e.value}})),renderOption:function(e){e.option;var t=Object(j.a)(e,["option"]);return r.a.createElement(k.a,t)}}))),"teacher"===u&&r.a.createElement(D.a,null,r.a.createElement(T.a,{stretched:!0,size:"l",onClick:a,"data-to":d},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))))},G=(a(171),a(173)),I=function(e){var t=e.go;return e.clubs.map((function(e){return r.a.createElement(E.p,{key:e.name,onClick:t,"data-to":"club","data-clubid":e.name},e.name?e.name:"")}))},z=function(e){var t=e.id,a=e.go,n=e.fetchedUser,c=e.store.getState().teacherState.clubs;return r.a.createElement(E.m,{id:t},r.a.createElement(E.n,null,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0447\u0438\u0442\u0435\u043b\u044f"),r.a.createElement(E.j,null,r.a.createElement(E.i,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:32}},r.a.createElement(E.c,{size:96,src:n&&n.photo_200?n.photo_200:""}),r.a.createElement(E.r,{style:{marginBottom:8,marginTop:20},level:"2",weight:"medium"},"".concat(n&&n.first_name?n.first_name:""," \n                        ").concat(n&&n.last_name?n.last_name:"")),r.a.createElement(E.q,{style:{marginBottom:24,color:"var(--text_secondary)"}},"\u0418\u043d\u0444\u043e"),r.a.createElement(E.d,{size:"m",mode:"secondary"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement(E.e,{before:r.a.createElement(G.a,null),onClick:a,"data-to":"teacher_addClub"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e"),r.a.createElement(E.e,{before:r.a.createElement(G.a,null),onClick:a,"data-to":"teacher_addStudyGroup"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u0431\u043d\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443"),r.a.createElement(E.e,{before:r.a.createElement(G.a,null),onClick:a,"data-to":"teacher_addStudent"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430")),r.a.createElement(E.j,{header:r.a.createElement(E.k,null,"\u041c\u043e\u0438 \u0441\u0435\u043a\u0446\u0438\u0438")},c.length>0&&r.a.createElement(I,{go:a,clubs:c}),0===c.length&&r.a.createElement(E.f,null,r.a.createElement(E.q,null,"\u0421\u0435\u043a\u0446\u0438\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))))};var B=function(e){var t=e.id,a=e.go,c=(e.fetchedUser,e.store),l=Object(n.useState)(""),u=Object(s.a)(l,2),o=u[0],m=u[1];return r.a.createElement(E.m,{id:t},r.a.createElement(E.n,{left:r.a.createElement(E.o,{onClick:a,"data-to":"teacher_profile"})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e"),r.a.createElement(E.j,null,r.a.createElement(E.h,null,r.a.createElement(E.g,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},r.a.createElement(E.l,{onChange:function(e){m(e.currentTarget.value)}}))),r.a.createElement(E.g,null,r.a.createElement(E.d,{size:"l",stretched:!0,onClick:function(){var e={name:o};c.dispatch(function(e){return{type:"ADD_CLUB",club:e}}(e)),a({currentTarget:{dataset:{to:"teacher_profile"}}})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e"))))},R=function(e){var t=e.id,a=e.go,c=(e.fetchedUser,e.club_name),l=e.store,u=Object(n.useState)(""),o=Object(s.a)(u,2),m=o[0],i=o[1];return r.a.createElement(E.m,{id:t},r.a.createElement(E.n,{left:r.a.createElement(E.o,{onClick:a,"data-to":"club"})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"),r.a.createElement(E.j,null,r.a.createElement(E.h,null,r.a.createElement(E.g,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},r.a.createElement(E.l,{onChange:function(e){i(e.currentTarget.value)}}))),r.a.createElement(E.g,null,r.a.createElement(E.d,{size:"l",stretched:!0,onClick:function(){var e={name:m};l.dispatch(function(e,t){return{type:"ADD_GROUP",group:e,club_name:t}}(e,c)),a({currentTarget:{dataset:{to:"club"}}})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"))))},q=function(e){var t=e.id,a=e.go;e.fetchedUser,e.store;return r.a.createElement(E.m,{id:t},r.a.createElement(E.n,{left:r.a.createElement(E.o,{onClick:a,"data-to":"teacher_profile"})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430"))},K=function(e){var t=e.go,a=e.groups,n=e.club_name;return a.map((function(e){return r.a.createElement(E.p,{key:e.name,onClick:t,"data-to":"group","data-clubid":n,"data-groupid":e.name},e.name?e.name:"")}))},P=function(e){var t=e.id,a=e.go,n=(e.fetchedUser,e.store),c=e.club_name,l=function(){var e,t=n.getState().teacherState.clubs,a=Object(b.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(r.name===c)return r.groups?r.groups:null}}catch(l){a.e(l)}finally{a.f()}}();return r.a.createElement(E.m,{id:t},r.a.createElement(E.n,{left:r.a.createElement(E.o,{onClick:a,"data-to":"teacher_profile"})},'\u0421\u0435\u043a\u0446\u0438\u044f "',c||"",'"'),r.a.createElement(E.f,null,r.a.createElement(E.e,{before:r.a.createElement(G.a,null),onClick:a,"data-to":"teacher_addStudyGroup","data-clubid":c},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u0431\u043d\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443")),r.a.createElement(E.j,{header:r.a.createElement(E.k,null,"\u041c\u043e\u0438 \u0433\u0440\u0443\u043f\u043f\u044b")},l&&l.length>0&&r.a.createElement(K,{groups:l}),!l||0===l.length&&r.a.createElement(E.f,null,r.a.createElement(E.q,null,"\u0413\u0440\u0443\u043f\u043f\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))))},V=function(){var e=Object(n.useState)("role"),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),u=Object(s.a)(l,2),m=u[0],p=u[1],b=Object(n.useState)(""),h=Object(s.a)(b,2),g=h[0],v=h[1],j=Object(n.useState)(""),y=Object(s.a)(j,2);y[0],y[1];Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]);var O=function(e){e.currentTarget.dataset.clubid&&v(e.currentTarget.dataset.clubid),e.currentTarget.dataset.groupId&&v(e.currentTarget.dataset.groupid),c(e.currentTarget.dataset.to)};return r.a.createElement(E.a,null,r.a.createElement(E.b,null,r.a.createElement(f.a,{activePanel:a},r.a.createElement(x,{id:"role",fetchedUser:m,go:O,store:_}),r.a.createElement(z,{id:"teacher_profile",fetchedUser:m,go:O,store:_}),r.a.createElement(B,{id:"teacher_addClub",fetchedUser:m,go:O,store:_}),r.a.createElement(R,{id:"teacher_addStudyGroup",fetchedUser:m,go:O,store:_,club_name:g}),r.a.createElement(q,{id:"teacher_addStudent",fetchedUser:m,go:O,store:_}),r.a.createElement(P,{id:"club",fetchedUser:m,go:O,store:_,club_name:g}))))};o.a.send("VKWebAppInit"),l.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[172,1,2]]]);
//# sourceMappingURL=main.70fcdc6f.chunk.js.map