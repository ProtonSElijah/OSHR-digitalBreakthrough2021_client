(this.webpackJsonpOSHR=this.webpackJsonpOSHR||[]).push([[0],{168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(60),l=a.n(c),u=a(36),o=a.n(u),m=a(73),s=a.n(m),d=a(77),i=a(23),f=a(30),g=a(3),E=(a(166),a(65)),b=a(28),p={clubs:[],students:[]};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CLUB":return t.club.groups=[],t.club.students=[],e.clubs.push(t.club),e;case"ADD_GROUP":var a,n=Object(b.a)(e.clubs);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.name===t.club_name){t.group.students=[],r.groups.push(t.group);break}}}catch(d){n.e(d)}finally{n.f()}return e;case"ADD_STUDENT":var c,l=Object(b.a)(e.clubs);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(u.name===t.club_name){u.students.push(t.student);var o,m=Object(b.a)(u.groups);try{for(m.s();!(o=m.n()).done;){var s=o.value;if(s.name===t.group_name){s.students.push(t.student),e.students.push(t.student);break}}}catch(d){m.e(d)}finally{m.f()}break}}}catch(d){l.e(d)}finally{l.f()}return e;default:return e}},v=Object(E.a)({teacherState:h}),_=Object(E.b)(v),y=a(80),j=a(55),O=a(53),k=a(52),C=a(42),S=a(48),U=a(37),T=a(49),D=a(50),A=a(54),x=[{type:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c",value:"teacher"},{type:"\u041e\u0431\u0443\u0447\u0430\u044e\u0449\u0438\u0439\u0441\u044f",value:"student"},{type:"\u0420\u043e\u0434\u0438\u0442\u0435\u043b\u044c",value:"parent"}],z=function(e){var t=e.id,a=e.go,c=(e.fetchedUser,Object(n.useState)("")),l=Object(i.a)(c,2),u=l[0],o=l[1],m=Object(n.useState)(null),s=Object(i.a)(m,2),d=s[0],f=s[1];return r.a.createElement(S.a,{id:t},r.a.createElement(U.a,null,"\u0412\u044b\u0431\u043e\u0440 \u0440\u043e\u043b\u0438"),r.a.createElement(D.a,null,r.a.createElement(k.a,null,r.a.createElement(O.a,{top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c"},r.a.createElement(j.a,{placeholder:"\u0420\u043e\u043b\u044c \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430",onChange:function(e){o(e.currentTarget.value),f("".concat(e.currentTarget.value,"_profile"))},value:u,options:x.map((function(e){return{label:e.type,value:e.value}})),renderOption:function(e){e.option;var t=Object(y.a)(e,["option"]);return r.a.createElement(C.a,t)}}))),"teacher"===u&&r.a.createElement(A.a,null,r.a.createElement(T.a,{stretched:!0,size:"l",onClick:a,"data-to":d},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))))},w=a(169),B=function(e){var t=e.go;return e.clubs.map((function(e){return r.a.createElement(g.p,{key:e.name,onClick:t,"data-to":"club","data-clubid":e.name},e.name?e.name:"")}))},I=function(e){var t=e.id,a=e.go,n=e.fetchedUser,c=e.store.getState().teacherState.clubs;return r.a.createElement(g.m,{id:t},r.a.createElement(g.n,null,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0447\u0438\u0442\u0435\u043b\u044f"),r.a.createElement(g.j,null,r.a.createElement(g.i,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:32}},r.a.createElement(g.c,{size:96,src:n&&n.photo_200?n.photo_200:""}),r.a.createElement(g.r,{style:{marginBottom:8,marginTop:20},level:"2",weight:"medium"},"".concat(n&&n.first_name?n.first_name:""," \n                        ").concat(n&&n.last_name?n.last_name:"")),r.a.createElement(g.q,{style:{marginBottom:24,color:"var(--text_secondary)"}},"\u0418\u043d\u0444\u043e"),r.a.createElement(g.d,{size:"m",mode:"secondary"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement(g.e,{before:r.a.createElement(w.a,null),onClick:a,"data-to":"teacher_addClub"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e")),r.a.createElement(g.j,{header:r.a.createElement(g.k,null,"\u041c\u043e\u0438 \u0441\u0435\u043a\u0446\u0438\u0438")},c.length>0&&r.a.createElement(B,{go:a,clubs:c}),0===c.length&&r.a.createElement(g.f,null,r.a.createElement(g.q,null,"\u0421\u0435\u043a\u0446\u0438\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))))};var M=function(e){var t=e.id,a=e.go,c=(e.fetchedUser,e.store),l=Object(n.useState)(""),u=Object(i.a)(l,2),o=u[0],m=u[1];return r.a.createElement(g.m,{id:t},r.a.createElement(g.n,{left:r.a.createElement(g.o,{onClick:a,"data-to":"teacher_profile"})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e"),r.a.createElement(g.j,null,r.a.createElement(g.h,null,r.a.createElement(g.g,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},r.a.createElement(g.l,{onChange:function(e){m(e.currentTarget.value)}}))),r.a.createElement(g.g,null,r.a.createElement(g.d,{size:"l",stretched:!0,onClick:function(){var e={name:o,id:Math.floor(1e4*Math.random())};c.dispatch(function(e){return{type:"ADD_CLUB",club:e}}(e)),a({currentTarget:{dataset:{to:"teacher_profile"}}})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e"))))},q=function(e){var t=e.id,a=e.go,c=(e.fetchedUser,e.club_name),l=e.store,u=Object(n.useState)(""),o=Object(i.a)(u,2),m=o[0],s=o[1];return r.a.createElement(g.m,{id:t},r.a.createElement(g.n,{left:r.a.createElement(g.o,{onClick:a,"data-to":"club"})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"),r.a.createElement(g.j,null,r.a.createElement(g.h,null,r.a.createElement(g.g,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},r.a.createElement(g.l,{onChange:function(e){s(e.currentTarget.value)}}))),r.a.createElement(g.g,null,r.a.createElement(g.d,{size:"l",stretched:!0,onClick:function(){var e={name:m,id:Math.floor(1e4*Math.random())};l.dispatch(function(e,t){return{type:"ADD_GROUP",group:e,club_name:t}}(e,c)),a({currentTarget:{dataset:{to:"club"}}})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"))))},G=function(e){var t=e.id,a=e.go,c=(e.fetchedUser,e.store),l=e.group_name,u=e.club_name,o=Object(n.useState)(""),m=Object(i.a)(o,2),s=m[0],d=m[1],f=Object(n.useState)(""),E=Object(i.a)(f,2),b=E[0],p=E[1];return r.a.createElement(g.m,{id:t},r.a.createElement(g.n,{left:r.a.createElement(g.o,{onClick:a,"data-to":"group"})},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430"),r.a.createElement(g.j,null,r.a.createElement(g.h,null,r.a.createElement(g.g,{top:"\u0418\u043c\u044f"},r.a.createElement(g.l,{onChange:function(e){d(e.currentTarget.value)}})),r.a.createElement(g.g,{top:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"},r.a.createElement(g.l,{onChange:function(e){p(e.currentTarget.value)}}))),r.a.createElement(g.g,null,r.a.createElement(g.d,{size:"l",stretched:!0,onClick:function(){var e={firstname:s,lastname:b,id:Math.floor(1e4*Math.random()),clubs:{name:u,groups:l}};c.dispatch(function(e,t,a){return{type:"ADD_STUDENT",student:e,group_name:t,club_name:a}}(e,l,u)),a({currentTarget:{dataset:{to:"group"}}})},"data-clubid":u,"data-groupid":l},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430"))))},R=function(e){var t=e.go,a=e.groups,n=e.club_name;return a.map((function(e){return r.a.createElement(g.p,{key:e.name,onClick:t,"data-to":"group","data-clubid":n,"data-groupid":e.name},e.name?e.name:"")}))},K=function(e){var t=e.id,a=e.go,n=(e.fetchedUser,e.store),c=e.club_name,l=function(){var e,t=n.getState().teacherState.clubs,a=Object(b.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(r.name===c)return r.groups?r.groups:null}}catch(l){a.e(l)}finally{a.f()}}();return r.a.createElement(g.m,{id:t},r.a.createElement(g.n,{left:r.a.createElement(g.o,{onClick:a,"data-to":"teacher_profile"})},'\u0421\u0435\u043a\u0446\u0438\u044f "',c||"",'"'),r.a.createElement(g.f,null,r.a.createElement(g.e,{before:r.a.createElement(w.a,null),onClick:a,"data-to":"teacher_addStudyGroup","data-clubid":c},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u0431\u043d\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443")),r.a.createElement(g.j,{header:r.a.createElement(g.k,null,"\u041c\u043e\u0438 \u0433\u0440\u0443\u043f\u043f\u044b")},l&&l.length>0&&r.a.createElement(R,{go:a,groups:l,club_name:c}),!l||0===l.length&&r.a.createElement(g.f,null,r.a.createElement(g.q,null,"\u0413\u0440\u0443\u043f\u043f\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))))},N=function(e){var t=e.go,a=e.students;e.club_name,e.group_name;return a.map((function(e){return r.a.createElement(g.p,{key:e.id,before:r.a.createElement(g.c,{size:40}),onClick:t,"data-to":"teacher_student","data-studentid":e.id},"".concat(e.firstname?e.firstname:""," ").concat(e.lastname?e.lastname:""))}))},P=function(e){var t=e.id,a=e.go,n=(e.fetchedUser,e.store),c=e.club_name,l=e.group_name,u=function(){var e,t=n.getState().teacherState.clubs,a=Object(b.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(r.name===c){var u,o=Object(b.a)(r.groups);try{for(o.s();!(u=o.n()).done;){var m=u.value;if(m.name===l)return m.students?m.students:null}}catch(s){o.e(s)}finally{o.f()}}}}catch(s){a.e(s)}finally{a.f()}}();return r.a.createElement(g.m,{id:t},r.a.createElement(g.n,{left:r.a.createElement(g.o,{onClick:a,"data-to":"club","data-clubid":c})},"\u0423\u0447\u0435\u043d\u0438\u043a\u0438"),r.a.createElement(g.f,null,r.a.createElement(g.e,{before:r.a.createElement(w.a,null),onClick:a,"data-to":"teacher_addStudent","data-clubid":c,"data-groupid":l},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430")),r.a.createElement(g.j,{header:r.a.createElement(g.k,null,"\u0423\u0447\u0435\u043d\u0438\u043a\u0438 \u0433\u0440\u0443\u043f\u043f\u044b ",l)},u&&u.length>0&&r.a.createElement(N,{go:a,students:u,club_name:c,group_name:l}),!u||0===u.length&&r.a.createElement(g.f,null,r.a.createElement(g.q,null,"\u0423\u0447\u0435\u043d\u0438\u043a\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))))},V=function(e){var t=e.id,a=e.go,n=(e.fetchedUser,e.store),c=e.student_id,l=function(){var e,t=n.getState().teacherState.students,a=Object(b.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;if(r.id===c)return r||null}}catch(l){a.e(l)}finally{a.f()}}();return r.a.createElement(g.m,{id:t},r.a.createElement(g.n,{left:r.a.createElement(g.o,{onClick:a,"data-to":"group"})},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0447\u0435\u043d\u0438\u043a\u0430"),r.a.createElement(g.j,null,r.a.createElement(g.i,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:32}},r.a.createElement(g.c,null),r.a.createElement(g.r,{style:{marginBottom:8,marginTop:20},level:"2",weight:"medium"},"".concat(l&&l.firstname?l.firstname:""," \n                        ").concat(l&&l.lastname?l.lastname:"")),r.a.createElement(g.q,{style:{marginBottom:24,color:"var(--text_secondary)"}},"\u0418\u043d\u0444\u043e"),r.a.createElement(g.d,{size:"m",mode:"secondary"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))},W=function(){var e=Object(n.useState)("role"),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),u=Object(i.a)(l,2),m=u[0],E=u[1],b=Object(n.useState)(""),p=Object(i.a)(b,2),h=p[0],v=p[1],y=Object(n.useState)(""),j=Object(i.a)(y,2),O=j[0],k=j[1],C=Object(n.useState)(""),S=Object(i.a)(C,2),U=S[0],T=S[1];Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,E(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]);var D=function(e){e.currentTarget.dataset.clubid&&v(e.currentTarget.dataset.clubid),e.currentTarget.dataset.groupid&&k(e.currentTarget.dataset.groupid),e.currentTarget.dataset.studentid&&T(e.currentTarget.dataset.studentid),c(e.currentTarget.dataset.to)};return r.a.createElement(g.a,null,r.a.createElement(g.b,null,r.a.createElement(f.a,{activePanel:a},r.a.createElement(z,{id:"role",fetchedUser:m,go:D,store:_}),r.a.createElement(I,{id:"teacher_profile",fetchedUser:m,go:D,store:_}),r.a.createElement(M,{id:"teacher_addClub",fetchedUser:m,go:D,store:_}),r.a.createElement(q,{id:"teacher_addStudyGroup",fetchedUser:m,go:D,store:_,club_name:h}),r.a.createElement(G,{id:"teacher_addStudent",fetchedUser:m,go:D,store:_,club_name:h,group_name:O}),r.a.createElement(K,{id:"club",fetchedUser:m,go:D,store:_,club_name:h}),r.a.createElement(P,{id:"group",fetchedUser:m,go:D,store:_,club_name:h,group_name:O}),r.a.createElement(V,{id:"teacher_student",fetchedUser:m,go:D,store:_,student_id:U}))))};o.a.send("VKWebAppInit"),l.a.render(r.a.createElement(W,null),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.f9f254e2.chunk.js.map